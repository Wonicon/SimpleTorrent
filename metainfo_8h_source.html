<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>SimpleTorrent: metainfo.h 源文件</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SimpleTorrent
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>首页</span></a></li>
      <li><a href="pages.html"><span>相关页面</span></a></li>
      <li><a href="annotated.html"><span>结构体</span></a></li>
      <li class="current"><a href="files.html"><span>文件</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>文件列表</span></a></li>
      <li><a href="globals.html"><span>全局定义</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">metainfo.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="metainfo_8h.html">浏览该文件的文档.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#ifndef METAINFO_H</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#define METAINFO_H</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="metainfo_8h.html#ad6074dd11ab3c97c8135c43aab03ae95">   16</a></span>&#160;<span class="preprocessor">#define HASH_SIZE 20</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">struct </span><a class="code" href="structBNode.html">BNode</a>;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="structTracker.html">   21</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structTracker.html">Tracker</a></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;{</div><div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="structTracker.html#a289144bee80ddd3843fde24ee96fbfbc">   23</a></span>&#160;    <span class="keywordtype">char</span> <a class="code" href="structTracker.html#a289144bee80ddd3843fde24ee96fbfbc">method</a>[10];        </div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="structTracker.html#a6fda9768c97b39dd14f9e968a53ccab9">   24</a></span>&#160;    <span class="keywordtype">char</span> <a class="code" href="structTracker.html#a6fda9768c97b39dd14f9e968a53ccab9">host</a>[128];         </div><div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="structTracker.html#a7c184aceab6aa0b73449c942272f5d89">   25</a></span>&#160;    <span class="keywordtype">char</span> <a class="code" href="structTracker.html#a7c184aceab6aa0b73449c942272f5d89">port</a>[10];          </div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="structTracker.html#a3b3c3b5ed125ed0970e4f15d050f2213">   26</a></span>&#160;    <span class="keywordtype">char</span> <a class="code" href="structTracker.html#a3b3c3b5ed125ed0970e4f15d050f2213">request</a>[128];      </div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="structTracker.html#a76e34c442c34a66420dcded072fe0090">   27</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structTracker.html#a76e34c442c34a66420dcded072fe0090">sfd</a>;                </div><div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="structTracker.html#afa996306bfa1419d6b3e076ca5011b3b">   28</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structTracker.html#afa996306bfa1419d6b3e076ca5011b3b">timerfd</a>;            </div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;};</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="metainfo_8h.html#ae3fa8612f0ffb51e32675472d734916f">   32</a></span>&#160;<span class="preprocessor">#define SUB_NA 0</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="metainfo_8h.html#a02dd2c385d0547cc5a057213a71021b0">   34</a></span>&#160;<span class="preprocessor">#define SUB_DOWNLOAD 1</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="metainfo_8h.html#a4c26e6dc0c142ca0b1d664872211af0d">   36</a></span>&#160;<span class="preprocessor">#define SUB_FINISH 2</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="metainfo_8h.html#a9fbfdc2d7f8546e0163931ecb3a926b5">   38</a></span>&#160;<span class="preprocessor">#define WAIT_THRESHOLD 10.0</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="structPieceInfo.html">   51</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structPieceInfo.html">PieceInfo</a></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;{</div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="structPieceInfo.html#ab49d506a1929b305e228124abbfad905">   53</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>  hash[<a class="code" href="metainfo_8h.html#ad6074dd11ab3c97c8135c43aab03ae95">HASH_SIZE</a>]; </div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="structPieceInfo.html#a1b0d2fc968fe0c5034e719de66970d46">   54</a></span>&#160;    <span class="keywordtype">int</span>            <a class="code" href="structPieceInfo.html#a1b0d2fc968fe0c5034e719de66970d46">nr_owners</a>;       </div><div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="structPieceInfo.html#a057060cd8c35e954d69841af2b7201ea">   55</a></span>&#160;    <span class="keywordtype">int</span>            <a class="code" href="structPieceInfo.html#a057060cd8c35e954d69841af2b7201ea">is_downloaded</a>;   </div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="structPieceInfo.html#ab5b842638be99e9a92a7e87d14500123">   57</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="structPieceInfo.html#ab5b842638be99e9a92a7e87d14500123">substate</a>;        </div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="structPieceInfo.html#afa46e6be89e7fb5dd6833cee1afc680d">   58</a></span>&#160;    time_t        *<a class="code" href="structPieceInfo.html#afa46e6be89e7fb5dd6833cee1afc680d">subtimer</a>;        </div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;};</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="structWaitPeer.html">   69</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structWaitPeer.html">WaitPeer</a></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="structWaitPeer.html#a191d1435fe8308fbacf91494c0a285e1">   71</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structWaitPeer.html#a191d1435fe8308fbacf91494c0a285e1">fd</a>;               </div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keyword">union </span>{</div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="structWaitPeer.html#ae5998fc0eb79eb739fd36190066ea7c1">   73</a></span>&#160;        uint32_t <a class="code" href="structWaitPeer.html#ae5998fc0eb79eb739fd36190066ea7c1">addr</a>;    </div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="structWaitPeer.html#af3b2145bd4899560662659fb91257fda">   74</a></span>&#160;        uint8_t ip[4];    </div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    };</div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="structWaitPeer.html#ac806a8c452ec9c2e8936fef7856cfe4d">   76</a></span>&#160;    uint16_t <a class="code" href="structWaitPeer.html#ac806a8c452ec9c2e8936fef7856cfe4d">port</a>;        </div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="structWaitPeer.html#a490f9d6c7e59d5155a3a254166339e03">   77</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structWaitPeer.html#a490f9d6c7e59d5155a3a254166339e03">direction</a>;        </div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;};</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="structMetaInfo.html">   89</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structMetaInfo.html">MetaInfo</a></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;{</div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="structMetaInfo.html#aa0ff45cbac06745f39f95f7c6b85755d">   91</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structMetaInfo.html#aa0ff45cbac06745f39f95f7c6b85755d">file_size</a>;                   </div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="structMetaInfo.html#a6be92e3660afd2e80b8c3c4adaee29bb">   92</a></span>&#160;    FILE *<a class="code" href="structMetaInfo.html#a6be92e3660afd2e80b8c3c4adaee29bb">file</a>;                         </div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="structMetaInfo.html#a840c5db56f22ef9e305d98dbfdea6896">   93</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> info_hash[<a class="code" href="metainfo_8h.html#ad6074dd11ab3c97c8135c43aab03ae95">HASH_SIZE</a>]; </div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="structMetaInfo.html#ae60f6e70778ae6bc3e31c1223fbb61a0">   95</a></span>&#160;    uint32_t <a class="code" href="structMetaInfo.html#ae60f6e70778ae6bc3e31c1223fbb61a0">piece_size</a>;                </div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="structMetaInfo.html#a689b2dd35025dcbdf8aeff69ed4f09f5">   96</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structMetaInfo.html#a689b2dd35025dcbdf8aeff69ed4f09f5">nr_pieces</a>;                   </div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="structMetaInfo.html#a2b39f28d9b583a1457f3d0a754c85914">   97</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structMetaInfo.html#a2b39f28d9b583a1457f3d0a754c85914">bitfield_size</a>;               </div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="structMetaInfo.html#a95a50d2312384c019ce512f9958609e2">   98</a></span>&#160;    uint32_t <a class="code" href="structMetaInfo.html#a95a50d2312384c019ce512f9958609e2">sub_size</a>;                  </div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="structMetaInfo.html#ad86f6cdcc7c032b65507727036190758">   99</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structMetaInfo.html#ad86f6cdcc7c032b65507727036190758">sub_count</a>;                   </div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="structMetaInfo.html#a7626bb4c1c1667da109e1aae91f345b9">  100</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structPieceInfo.html">PieceInfo</a> *<a class="code" href="structMetaInfo.html#a7626bb4c1c1667da109e1aae91f345b9">pieces</a>;           </div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="structMetaInfo.html#aa1ab71cae77a91706c58175915769c67">  102</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structMetaInfo.html#aa1ab71cae77a91706c58175915769c67">port</a>;                </div><div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="structMetaInfo.html#a5092f45f1098652d8e5b05aa22ec9c37">  103</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structMetaInfo.html#a5092f45f1098652d8e5b05aa22ec9c37">listen_fd</a>;                      </div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="structMetaInfo.html#a17b121e4a9adbf2ed37c5f13723cc680">  104</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structMetaInfo.html#a17b121e4a9adbf2ed37c5f13723cc680">timerfd</a>;                        </div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="structMetaInfo.html#a6bca636d30f7dd2c13fd27f90e462cf7">  105</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structMetaInfo.html#a6bca636d30f7dd2c13fd27f90e462cf7">nr_peers</a>;                       </div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="structMetaInfo.html#afbba8e99502aae27010b5765337a8559">  106</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structPeer.html">Peer</a> **<a class="code" href="structMetaInfo.html#afbba8e99502aae27010b5765337a8559">peers</a>;                </div><div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="structMetaInfo.html#abd42b3654c465a2ad18503b5df58ffc6">  107</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structMetaInfo.html#abd42b3654c465a2ad18503b5df58ffc6">nr_wait_peers</a>;                  </div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="structMetaInfo.html#a34759b6fd0650e356c66919e9cf05a26">  108</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structWaitPeer.html">WaitPeer</a> *<a class="code" href="structMetaInfo.html#a34759b6fd0650e356c66919e9cf05a26">wait_peers</a>;        </div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="structMetaInfo.html#a4cf30353764e96f0a59f8b106354c0f1">  109</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structMetaInfo.html#a4cf30353764e96f0a59f8b106354c0f1">nr_trackers</a>;                 </div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="structMetaInfo.html#a04e7b759374d282f1a1c16f2d9f6a239">  110</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structTracker.html">Tracker</a> *<a class="code" href="structMetaInfo.html#a04e7b759374d282f1a1c16f2d9f6a239">trackers</a>;           </div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;};</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keywordtype">void</span> <a class="code" href="metainfo_8h.html#ae9639692cbf4a51735c6365ad35b904a">free_metainfo</a>(<span class="keyword">struct</span> <a class="code" href="structMetaInfo.html">MetaInfo</a> **pmi);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keywordtype">void</span> <a class="code" href="metainfo_8h.html#a8859c576edfc642ef89d66984d0d531f">extract_trackers</a>(<span class="keyword">struct</span> <a class="code" href="structMetaInfo.html">MetaInfo</a> *mi, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structBNode.html">BNode</a> *ast);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="keywordtype">void</span> <a class="code" href="metainfo_8h.html#a108b01c970e97953b9430fe80cc571dd">metainfo_load_file</a>(<span class="keyword">struct</span> <a class="code" href="structMetaInfo.html">MetaInfo</a> *mi, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structBNode.html">BNode</a> *ast);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="keywordtype">void</span> <a class="code" href="metainfo_8h.html#af9920b3ee23e92c773734e1a7d1c4bc5">extract_pieces</a>(<span class="keyword">struct</span> <a class="code" href="structMetaInfo.html">MetaInfo</a> *mi, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structBNode.html">BNode</a> *ast);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="keywordtype">void</span> <a class="code" href="metainfo_8h.html#a7fa5e284ddbc9416dae702f86396d1f4">add_peer</a>(<span class="keyword">struct</span> <a class="code" href="structMetaInfo.html">MetaInfo</a> *mi, <span class="keyword">struct</span> <a class="code" href="structPeer.html">Peer</a> *p);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="keywordtype">void</span> <a class="code" href="metainfo_8h.html#ad389a17acedda88f7ec07f3d1fe16d13">del_peer_by_fd</a>(<span class="keyword">struct</span> <a class="code" href="structMetaInfo.html">MetaInfo</a> *mi, <span class="keywordtype">int</span> fd);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="keyword">struct </span><a class="code" href="structPeer.html">Peer</a> *<a class="code" href="metainfo_8h.html#a6a1bb5a89206b2839221a6fbdcc76391">get_peer_by_fd</a>(<span class="keyword">struct</span> <a class="code" href="structMetaInfo.html">MetaInfo</a> *mi, <span class="keywordtype">int</span> <a class="code" href="structPeer.html#aaff13c1dcd4c4a80411d97aeb0fce99f">fd</a>);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="keyword">struct </span><a class="code" href="structPeer.html">Peer</a> * <a class="code" href="metainfo_8h.html#acfe90ddb8114d95960e645b74c4a3596">get_peer_by_addr</a>(<span class="keyword">struct</span> <a class="code" href="structMetaInfo.html">MetaInfo</a> *mi, uint32_t <a class="code" href="structPeer.html#af240ffc7a6514af5666e5c736789b171">addr</a>, uint16_t <a class="code" href="structTracker.html#a7c184aceab6aa0b73449c942272f5d89">port</a>);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="keywordtype">int</span> <a class="code" href="metainfo_8h.html#a0ca18a112ba5197130cc7770ce5efc85">check_substate</a>(<span class="keyword">struct</span> <a class="code" href="structMetaInfo.html">MetaInfo</a> *mi, <span class="keywordtype">int</span> index);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="keyword">struct </span><a class="code" href="structTracker.html">Tracker</a> *<a class="code" href="metainfo_8h.html#a98a06061e6a4ba654b3a279a377eca47">get_tracker_by_fd</a>(<span class="keyword">struct</span> <a class="code" href="structMetaInfo.html">MetaInfo</a> *mi, <span class="keywordtype">int</span> <a class="code" href="structTracker.html#a76e34c442c34a66420dcded072fe0090">sfd</a>);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="keyword">struct </span><a class="code" href="structTracker.html">Tracker</a> *<a class="code" href="metainfo_8h.html#aa744e37bc7247a42651e5e275a75bf10">get_tracker_by_timer</a>(<span class="keyword">struct</span> <a class="code" href="structMetaInfo.html">MetaInfo</a> *mi, <span class="keywordtype">int</span> <a class="code" href="structTracker.html#afa996306bfa1419d6b3e076ca5011b3b">timerfd</a>);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="keywordtype">void</span> <a class="code" href="metainfo_8h.html#a99194ac1d61e6cd9dd6d3c506abc2ae7">add_wait_peer</a>(<span class="keyword">struct</span> <a class="code" href="structMetaInfo.html">MetaInfo</a> *mi, <span class="keywordtype">int</span> fd, uint32_t addr, uint16_t <a class="code" href="structTracker.html#a7c184aceab6aa0b73449c942272f5d89">port</a>);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="keywordtype">int</span> <a class="code" href="metainfo_8h.html#a5630c31340a960849e709464be6c81ab">get_wait_peer_index_by_fd</a>(<span class="keyword">struct</span> <a class="code" href="structMetaInfo.html">MetaInfo</a> *mi, <span class="keywordtype">int</span> fd);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="keywordtype">int</span> <a class="code" href="metainfo_8h.html#ae15a761a62ea1fb810f8caac1d4e2e46">find_wait_peer_fd_by_addr</a>(<span class="keyword">struct</span> <a class="code" href="structMetaInfo.html">MetaInfo</a> *mi, uint32_t addr, uint16_t <a class="code" href="structTracker.html#a7c184aceab6aa0b73449c942272f5d89">port</a>);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="keywordtype">void</span> <a class="code" href="metainfo_8h.html#a73883a857c3bba4acf63aad4ebd53018">rm_wait_peer</a>(<span class="keyword">struct</span> <a class="code" href="structMetaInfo.html">MetaInfo</a> *mi, <span class="keywordtype">int</span> index);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="preprocessor">#endif  // METAINFO_H</span></div><div class="ttc" id="metainfo_8h_html_a0ca18a112ba5197130cc7770ce5efc85"><div class="ttname"><a href="metainfo_8h.html#a0ca18a112ba5197130cc7770ce5efc85">check_substate</a></div><div class="ttdeci">int check_substate(struct MetaInfo *mi, int index)</div><div class="ttdoc">检查某一分片的子分片状态并打印 </div><div class="ttdef"><b>Definition:</b> metainfo.c:238</div></div>
<div class="ttc" id="structMetaInfo_html_a7626bb4c1c1667da109e1aae91f345b9"><div class="ttname"><a href="structMetaInfo.html#a7626bb4c1c1667da109e1aae91f345b9">MetaInfo::pieces</a></div><div class="ttdeci">struct PieceInfo * pieces</div><div class="ttdoc">分片信息数组 </div><div class="ttdef"><b>Definition:</b> metainfo.h:100</div></div>
<div class="ttc" id="structPeer_html_aaff13c1dcd4c4a80411d97aeb0fce99f"><div class="ttname"><a href="structPeer.html#aaff13c1dcd4c4a80411d97aeb0fce99f">Peer::fd</a></div><div class="ttdeci">int fd</div><div class="ttdoc">连接套接字 </div><div class="ttdef"><b>Definition:</b> peer.h:104</div></div>
<div class="ttc" id="metainfo_8h_html_a7fa5e284ddbc9416dae702f86396d1f4"><div class="ttname"><a href="metainfo_8h.html#a7fa5e284ddbc9416dae702f86396d1f4">add_peer</a></div><div class="ttdeci">void add_peer(struct MetaInfo *mi, struct Peer *p)</div><div class="ttdoc">增加一个 peer </div><div class="ttdef"><b>Definition:</b> metainfo.c:166</div></div>
<div class="ttc" id="structWaitPeer_html_ae5998fc0eb79eb739fd36190066ea7c1"><div class="ttname"><a href="structWaitPeer.html#ae5998fc0eb79eb739fd36190066ea7c1">WaitPeer::addr</a></div><div class="ttdeci">uint32_t addr</div><div class="ttdoc">ip 地址，方便比较的形式 </div><div class="ttdef"><b>Definition:</b> metainfo.h:73</div></div>
<div class="ttc" id="structPieceInfo_html_ab5b842638be99e9a92a7e87d14500123"><div class="ttname"><a href="structPieceInfo.html#ab5b842638be99e9a92a7e87d14500123">PieceInfo::substate</a></div><div class="ttdeci">unsigned char * substate</div><div class="ttdoc">标记子分片完成情况： SUB_NA - 未下载，SUB_DOWNLOAD - 下载中，SUB_FINISH - 下载完成。 ...</div><div class="ttdef"><b>Definition:</b> metainfo.h:57</div></div>
<div class="ttc" id="structMetaInfo_html_a5092f45f1098652d8e5b05aa22ec9c37"><div class="ttname"><a href="structMetaInfo.html#a5092f45f1098652d8e5b05aa22ec9c37">MetaInfo::listen_fd</a></div><div class="ttdeci">int listen_fd</div><div class="ttdoc">侦听套接字 </div><div class="ttdef"><b>Definition:</b> metainfo.h:103</div></div>
<div class="ttc" id="structMetaInfo_html_a2b39f28d9b583a1457f3d0a754c85914"><div class="ttname"><a href="structMetaInfo.html#a2b39f28d9b583a1457f3d0a754c85914">MetaInfo::bitfield_size</a></div><div class="ttdeci">size_t bitfield_size</div><div class="ttdoc">bitfield 的字节大小，即 nr_pieces / 8 上取整 </div><div class="ttdef"><b>Definition:</b> metainfo.h:97</div></div>
<div class="ttc" id="metainfo_8h_html_a8859c576edfc642ef89d66984d0d531f"><div class="ttname"><a href="metainfo_8h.html#a8859c576edfc642ef89d66984d0d531f">extract_trackers</a></div><div class="ttdeci">void extract_trackers(struct MetaInfo *mi, const struct BNode *ast)</div><div class="ttdoc">提取 tracker 列表 </div><div class="ttdef"><b>Definition:</b> metainfo.c:36</div></div>
<div class="ttc" id="metainfo_8h_html_aa744e37bc7247a42651e5e275a75bf10"><div class="ttname"><a href="metainfo_8h.html#aa744e37bc7247a42651e5e275a75bf10">get_tracker_by_timer</a></div><div class="ttdeci">struct Tracker * get_tracker_by_timer(struct MetaInfo *mi, int timerfd)</div><div class="ttdoc">根据定时器描述符找 tracker </div><div class="ttdef"><b>Definition:</b> metainfo.c:276</div></div>
<div class="ttc" id="structMetaInfo_html_abd42b3654c465a2ad18503b5df58ffc6"><div class="ttname"><a href="structMetaInfo.html#abd42b3654c465a2ad18503b5df58ffc6">MetaInfo::nr_wait_peers</a></div><div class="ttdeci">int nr_wait_peers</div><div class="ttdoc">已发出 connect 的 peer 数量 </div><div class="ttdef"><b>Definition:</b> metainfo.h:107</div></div>
<div class="ttc" id="metainfo_8h_html_ae9639692cbf4a51735c6365ad35b904a"><div class="ttname"><a href="metainfo_8h.html#ae9639692cbf4a51735c6365ad35b904a">free_metainfo</a></div><div class="ttdeci">void free_metainfo(struct MetaInfo **pmi)</div><div class="ttdoc">释放全局信息 </div><div class="ttdef"><b>Definition:</b> metainfo.c:16</div></div>
<div class="ttc" id="structMetaInfo_html_a4cf30353764e96f0a59f8b106354c0f1"><div class="ttname"><a href="structMetaInfo.html#a4cf30353764e96f0a59f8b106354c0f1">MetaInfo::nr_trackers</a></div><div class="ttdeci">size_t nr_trackers</div><div class="ttdoc">tracker 数量 </div><div class="ttdef"><b>Definition:</b> metainfo.h:109</div></div>
<div class="ttc" id="structMetaInfo_html_a6bca636d30f7dd2c13fd27f90e462cf7"><div class="ttname"><a href="structMetaInfo.html#a6bca636d30f7dd2c13fd27f90e462cf7">MetaInfo::nr_peers</a></div><div class="ttdeci">int nr_peers</div><div class="ttdoc">peers 数组的大小 == 已握手 peer 的数量 </div><div class="ttdef"><b>Definition:</b> metainfo.h:105</div></div>
<div class="ttc" id="structMetaInfo_html_aa0ff45cbac06745f39f95f7c6b85755d"><div class="ttname"><a href="structMetaInfo.html#aa0ff45cbac06745f39f95f7c6b85755d">MetaInfo::file_size</a></div><div class="ttdeci">size_t file_size</div><div class="ttdoc">数据文件大小 </div><div class="ttdef"><b>Definition:</b> metainfo.h:91</div></div>
<div class="ttc" id="structMetaInfo_html_a34759b6fd0650e356c66919e9cf05a26"><div class="ttname"><a href="structMetaInfo.html#a34759b6fd0650e356c66919e9cf05a26">MetaInfo::wait_peers</a></div><div class="ttdeci">struct WaitPeer * wait_peers</div><div class="ttdoc">已发出 connect 的 peer 集合 </div><div class="ttdef"><b>Definition:</b> metainfo.h:108</div></div>
<div class="ttc" id="metainfo_8h_html_ad389a17acedda88f7ec07f3d1fe16d13"><div class="ttname"><a href="metainfo_8h.html#ad389a17acedda88f7ec07f3d1fe16d13">del_peer_by_fd</a></div><div class="ttdeci">void del_peer_by_fd(struct MetaInfo *mi, int fd)</div><div class="ttdoc">根据连接套接字删除 peer </div><div class="ttdef"><b>Definition:</b> metainfo.c:178</div></div>
<div class="ttc" id="structMetaInfo_html_afbba8e99502aae27010b5765337a8559"><div class="ttname"><a href="structMetaInfo.html#afbba8e99502aae27010b5765337a8559">MetaInfo::peers</a></div><div class="ttdeci">struct Peer ** peers</div><div class="ttdoc">已握手 peer 的集合 </div><div class="ttdef"><b>Definition:</b> metainfo.h:106</div></div>
<div class="ttc" id="structWaitPeer_html_ac806a8c452ec9c2e8936fef7856cfe4d"><div class="ttname"><a href="structWaitPeer.html#ac806a8c452ec9c2e8936fef7856cfe4d">WaitPeer::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdoc">端口号，网络字节序 </div><div class="ttdef"><b>Definition:</b> metainfo.h:76</div></div>
<div class="ttc" id="structTracker_html_a3b3c3b5ed125ed0970e4f15d050f2213"><div class="ttname"><a href="structTracker.html#a3b3c3b5ed125ed0970e4f15d050f2213">Tracker::request</a></div><div class="ttdeci">char request[128]</div><div class="ttdoc">请求 url （一般是 /announce, 默认 / ） </div><div class="ttdef"><b>Definition:</b> metainfo.h:26</div></div>
<div class="ttc" id="structWaitPeer_html_a191d1435fe8308fbacf91494c0a285e1"><div class="ttname"><a href="structWaitPeer.html#a191d1435fe8308fbacf91494c0a285e1">WaitPeer::fd</a></div><div class="ttdeci">int fd</div><div class="ttdoc">尚未完成连接或握手的套接字 </div><div class="ttdef"><b>Definition:</b> metainfo.h:71</div></div>
<div class="ttc" id="metainfo_8h_html_ae15a761a62ea1fb810f8caac1d4e2e46"><div class="ttname"><a href="metainfo_8h.html#ae15a761a62ea1fb810f8caac1d4e2e46">find_wait_peer_fd_by_addr</a></div><div class="ttdeci">int find_wait_peer_fd_by_addr(struct MetaInfo *mi, uint32_t addr, uint16_t port)</div><div class="ttdoc">根据地址找到 peer 的套接字，网络字节序 </div><div class="ttdef"><b>Definition:</b> metainfo.c:310</div></div>
<div class="ttc" id="structPieceInfo_html_a1b0d2fc968fe0c5034e719de66970d46"><div class="ttname"><a href="structPieceInfo.html#a1b0d2fc968fe0c5034e719de66970d46">PieceInfo::nr_owners</a></div><div class="ttdeci">int nr_owners</div><div class="ttdoc">该分片拥有者的数量。 </div><div class="ttdef"><b>Definition:</b> metainfo.h:54</div></div>
<div class="ttc" id="structPieceInfo_html"><div class="ttname"><a href="structPieceInfo.html">PieceInfo</a></div><div class="ttdoc">分片信息 </div><div class="ttdef"><b>Definition:</b> metainfo.h:51</div></div>
<div class="ttc" id="metainfo_8h_html_acfe90ddb8114d95960e645b74c4a3596"><div class="ttname"><a href="metainfo_8h.html#acfe90ddb8114d95960e645b74c4a3596">get_peer_by_addr</a></div><div class="ttdeci">struct Peer * get_peer_by_addr(struct MetaInfo *mi, uint32_t addr, uint16_t port)</div><div class="ttdoc">根据网络地址搜索 peer </div><div class="ttdef"><b>Definition:</b> metainfo.c:224</div></div>
<div class="ttc" id="structMetaInfo_html_a17b121e4a9adbf2ed37c5f13723cc680"><div class="ttname"><a href="structMetaInfo.html#a17b121e4a9adbf2ed37c5f13723cc680">MetaInfo::timerfd</a></div><div class="ttdeci">int timerfd</div><div class="ttdoc">发送 KEEP-ALIVE 的定时器 </div><div class="ttdef"><b>Definition:</b> metainfo.h:104</div></div>
<div class="ttc" id="structTracker_html_a289144bee80ddd3843fde24ee96fbfbc"><div class="ttname"><a href="structTracker.html#a289144bee80ddd3843fde24ee96fbfbc">Tracker::method</a></div><div class="ttdeci">char method[10]</div><div class="ttdoc">协议类型 http | udp </div><div class="ttdef"><b>Definition:</b> metainfo.h:23</div></div>
<div class="ttc" id="structBNode_html"><div class="ttname"><a href="structBNode.html">BNode</a></div><div class="ttdoc">B 编码结点 </div><div class="ttdef"><b>Definition:</b> bparser.h:39</div></div>
<div class="ttc" id="structTracker_html_afa996306bfa1419d6b3e076ca5011b3b"><div class="ttname"><a href="structTracker.html#afa996306bfa1419d6b3e076ca5011b3b">Tracker::timerfd</a></div><div class="ttdeci">int timerfd</div><div class="ttdoc">定时器描述符，用于在 epoll 里处理定时事件。 </div><div class="ttdef"><b>Definition:</b> metainfo.h:28</div></div>
<div class="ttc" id="structPieceInfo_html_a057060cd8c35e954d69841af2b7201ea"><div class="ttname"><a href="structPieceInfo.html#a057060cd8c35e954d69841af2b7201ea">PieceInfo::is_downloaded</a></div><div class="ttdeci">int is_downloaded</div><div class="ttdoc">标记该分片是否已经完成下载：1 - 已下载，0 - 未完成。 </div><div class="ttdef"><b>Definition:</b> metainfo.h:55</div></div>
<div class="ttc" id="structMetaInfo_html"><div class="ttname"><a href="structMetaInfo.html">MetaInfo</a></div><div class="ttdoc">描述一次运行的全局信息 </div><div class="ttdef"><b>Definition:</b> metainfo.h:89</div></div>
<div class="ttc" id="structTracker_html"><div class="ttname"><a href="structTracker.html">Tracker</a></div><div class="ttdoc">描述 tracker 的相关信息 </div><div class="ttdef"><b>Definition:</b> metainfo.h:21</div></div>
<div class="ttc" id="metainfo_8h_html_a99194ac1d61e6cd9dd6d3c506abc2ae7"><div class="ttname"><a href="metainfo_8h.html#a99194ac1d61e6cd9dd6d3c506abc2ae7">add_wait_peer</a></div><div class="ttdeci">void add_wait_peer(struct MetaInfo *mi, int fd, uint32_t addr, uint16_t port)</div><div class="ttdoc">添加等待 peer, 网络字节序 </div><div class="ttdef"><b>Definition:</b> metainfo.c:288</div></div>
<div class="ttc" id="metainfo_8h_html_a6a1bb5a89206b2839221a6fbdcc76391"><div class="ttname"><a href="metainfo_8h.html#a6a1bb5a89206b2839221a6fbdcc76391">get_peer_by_fd</a></div><div class="ttdeci">struct Peer * get_peer_by_fd(struct MetaInfo *mi, int fd)</div><div class="ttdoc">根据连接套接字搜索 peer </div><div class="ttdef"><b>Definition:</b> metainfo.c:209</div></div>
<div class="ttc" id="structTracker_html_a7c184aceab6aa0b73449c942272f5d89"><div class="ttname"><a href="structTracker.html#a7c184aceab6aa0b73449c942272f5d89">Tracker::port</a></div><div class="ttdeci">char port[10]</div><div class="ttdoc">端口（默认 80） </div><div class="ttdef"><b>Definition:</b> metainfo.h:25</div></div>
<div class="ttc" id="structMetaInfo_html_a04e7b759374d282f1a1c16f2d9f6a239"><div class="ttname"><a href="structMetaInfo.html#a04e7b759374d282f1a1c16f2d9f6a239">MetaInfo::trackers</a></div><div class="ttdeci">struct Tracker * trackers</div><div class="ttdoc">tracker 数组 </div><div class="ttdef"><b>Definition:</b> metainfo.h:110</div></div>
<div class="ttc" id="metainfo_8h_html_a98a06061e6a4ba654b3a279a377eca47"><div class="ttname"><a href="metainfo_8h.html#a98a06061e6a4ba654b3a279a377eca47">get_tracker_by_fd</a></div><div class="ttdeci">struct Tracker * get_tracker_by_fd(struct MetaInfo *mi, int sfd)</div><div class="ttdoc">根据连接套接字找 tracker </div><div class="ttdef"><b>Definition:</b> metainfo.c:260</div></div>
<div class="ttc" id="metainfo_8h_html_af9920b3ee23e92c773734e1a7d1c4bc5"><div class="ttname"><a href="metainfo_8h.html#af9920b3ee23e92c773734e1a7d1c4bc5">extract_pieces</a></div><div class="ttdeci">void extract_pieces(struct MetaInfo *mi, const struct BNode *ast)</div><div class="ttdoc">提取分片 hash </div><div class="ttdef"><b>Definition:</b> metainfo.c:125</div></div>
<div class="ttc" id="structMetaInfo_html_aa1ab71cae77a91706c58175915769c67"><div class="ttname"><a href="structMetaInfo.html#aa1ab71cae77a91706c58175915769c67">MetaInfo::port</a></div><div class="ttdeci">unsigned short port</div><div class="ttdoc">侦听端口 </div><div class="ttdef"><b>Definition:</b> metainfo.h:102</div></div>
<div class="ttc" id="structMetaInfo_html_a6be92e3660afd2e80b8c3c4adaee29bb"><div class="ttname"><a href="structMetaInfo.html#a6be92e3660afd2e80b8c3c4adaee29bb">MetaInfo::file</a></div><div class="ttdeci">FILE * file</div><div class="ttdoc">下载文件 </div><div class="ttdef"><b>Definition:</b> metainfo.h:92</div></div>
<div class="ttc" id="structWaitPeer_html"><div class="ttname"><a href="structWaitPeer.html">WaitPeer</a></div><div class="ttdoc">描述处于等待握手状态的 peer 信息 </div><div class="ttdef"><b>Definition:</b> metainfo.h:69</div></div>
<div class="ttc" id="structPeer_html"><div class="ttname"><a href="structPeer.html">Peer</a></div><div class="ttdoc">描述 peer 信息 </div><div class="ttdef"><b>Definition:</b> peer.h:102</div></div>
<div class="ttc" id="metainfo_8h_html_a73883a857c3bba4acf63aad4ebd53018"><div class="ttname"><a href="metainfo_8h.html#a73883a857c3bba4acf63aad4ebd53018">rm_wait_peer</a></div><div class="ttdeci">void rm_wait_peer(struct MetaInfo *mi, int index)</div><div class="ttdoc">删除等待 peer </div><div class="ttdef"><b>Definition:</b> metainfo.c:326</div></div>
<div class="ttc" id="structMetaInfo_html_a689b2dd35025dcbdf8aeff69ed4f09f5"><div class="ttname"><a href="structMetaInfo.html#a689b2dd35025dcbdf8aeff69ed4f09f5">MetaInfo::nr_pieces</a></div><div class="ttdeci">size_t nr_pieces</div><div class="ttdoc">分片数量，由 file_size 和 piece_size 计算得出，上取整 </div><div class="ttdef"><b>Definition:</b> metainfo.h:96</div></div>
<div class="ttc" id="structMetaInfo_html_ae60f6e70778ae6bc3e31c1223fbb61a0"><div class="ttname"><a href="structMetaInfo.html#ae60f6e70778ae6bc3e31c1223fbb61a0">MetaInfo::piece_size</a></div><div class="ttdeci">uint32_t piece_size</div><div class="ttdoc">分片大小 </div><div class="ttdef"><b>Definition:</b> metainfo.h:95</div></div>
<div class="ttc" id="structPeer_html_af240ffc7a6514af5666e5c736789b171"><div class="ttname"><a href="structPeer.html#af240ffc7a6514af5666e5c736789b171">Peer::addr</a></div><div class="ttdeci">uint32_t addr</div><div class="ttdoc">ip 的整数形式，用于地址比较，直接来自 sin_addr，故是网络字节序 </div><div class="ttdef"><b>Definition:</b> peer.h:107</div></div>
<div class="ttc" id="structWaitPeer_html_a490f9d6c7e59d5155a3a254166339e03"><div class="ttname"><a href="structWaitPeer.html#a490f9d6c7e59d5155a3a254166339e03">WaitPeer::direction</a></div><div class="ttdeci">int direction</div><div class="ttdoc">0: 我方主动连接, 1: 对方主动连接。 </div><div class="ttdef"><b>Definition:</b> metainfo.h:77</div></div>
<div class="ttc" id="structTracker_html_a6fda9768c97b39dd14f9e968a53ccab9"><div class="ttname"><a href="structTracker.html#a6fda9768c97b39dd14f9e968a53ccab9">Tracker::host</a></div><div class="ttdeci">char host[128]</div><div class="ttdoc">主机名（域名） </div><div class="ttdef"><b>Definition:</b> metainfo.h:24</div></div>
<div class="ttc" id="metainfo_8h_html_a108b01c970e97953b9430fe80cc571dd"><div class="ttname"><a href="metainfo_8h.html#a108b01c970e97953b9430fe80cc571dd">metainfo_load_file</a></div><div class="ttdeci">void metainfo_load_file(struct MetaInfo *mi, const struct BNode *ast)</div><div class="ttdoc">获取文件名，读取文件，分析已经完成的块 </div><div class="ttdef"><b>Definition:</b> metainfo.c:76</div></div>
<div class="ttc" id="structMetaInfo_html_a95a50d2312384c019ce512f9958609e2"><div class="ttname"><a href="structMetaInfo.html#a95a50d2312384c019ce512f9958609e2">MetaInfo::sub_size</a></div><div class="ttdeci">uint32_t sub_size</div><div class="ttdoc">子分片的大小，使用统一大小的子分片以简化实现 </div><div class="ttdef"><b>Definition:</b> metainfo.h:98</div></div>
<div class="ttc" id="structPieceInfo_html_afa46e6be89e7fb5dd6833cee1afc680d"><div class="ttname"><a href="structPieceInfo.html#afa46e6be89e7fb5dd6833cee1afc680d">PieceInfo::subtimer</a></div><div class="ttdeci">time_t * subtimer</div><div class="ttdoc">标记子分片下载等待时间 </div><div class="ttdef"><b>Definition:</b> metainfo.h:58</div></div>
<div class="ttc" id="structMetaInfo_html_ad86f6cdcc7c032b65507727036190758"><div class="ttname"><a href="structMetaInfo.html#ad86f6cdcc7c032b65507727036190758">MetaInfo::sub_count</a></div><div class="ttdeci">size_t sub_count</div><div class="ttdoc">子分片的数量 </div><div class="ttdef"><b>Definition:</b> metainfo.h:99</div></div>
<div class="ttc" id="metainfo_8h_html_ad6074dd11ab3c97c8135c43aab03ae95"><div class="ttname"><a href="metainfo_8h.html#ad6074dd11ab3c97c8135c43aab03ae95">HASH_SIZE</a></div><div class="ttdeci">#define HASH_SIZE</div><div class="ttdoc">SHA1 HASH 的字节数 </div><div class="ttdef"><b>Definition:</b> metainfo.h:16</div></div>
<div class="ttc" id="metainfo_8h_html_a5630c31340a960849e709464be6c81ab"><div class="ttname"><a href="metainfo_8h.html#a5630c31340a960849e709464be6c81ab">get_wait_peer_index_by_fd</a></div><div class="ttdeci">int get_wait_peer_index_by_fd(struct MetaInfo *mi, int fd)</div><div class="ttdoc">根据套接字找到 peer 下标 </div><div class="ttdef"><b>Definition:</b> metainfo.c:299</div></div>
<div class="ttc" id="structTracker_html_a76e34c442c34a66420dcded072fe0090"><div class="ttname"><a href="structTracker.html#a76e34c442c34a66420dcded072fe0090">Tracker::sfd</a></div><div class="ttdeci">int sfd</div><div class="ttdoc">socket file descriptor, 默认为 -1. 主要用于搜索, 会频繁重置. </div><div class="ttdef"><b>Definition:</b> metainfo.h:27</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者 &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
